<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Sockets</title>
    <!-- Estilos base -->
    <link rel="stylesheet" href="style.css">
    <!-- Estilos del nuevo tema de videojuego -->
    <link rel="stylesheet" href="game-theme.css">
</head>
<body class="fondo-juego">

    <div class="app-container">

        <!-- PANTALLA 1: BIENVENIDA -->
        <section id="pantalla-bienvenida" class="pantalla activa">
            <h1>Bingo Familiar</h1>
            <div class="form-unirse">
                <input type="text" id="inputNombre" placeholder="Ingresa tu Nombre" maxlength="15">
                <hr>
                <button id="btnCrearPartida">Crear Nueva Partida</button>
                <hr>
                <input type="text" id="inputClave" placeholder="Ingresa la Clave" maxlength="5">
                <button id="btnUnirsePartida">Unirse a la Partida</button>
                <p id="mensajeError"></p>
            </div>
        </section>

        <!-- PANTALLA 2: LOBBY -->
        <section id="pantalla-lobby" class="pantalla">
            <h2>Sala de Espera</h2>
            <p>Clave de la Partida: <strong id="lobbyClave">---</strong></p>
            
            <div id="lobby-vista-anfitrion">
                <h3>Selecciona el Patr√≥n de Juego:</h3>
                <div id="lobbyPatrones" class="selector-patrones">
                    <button class="patron seleccionado" data-patron="linea">L√≠nea Simple</button>
                    <button class="patron" data-patron="letra_l">Letra L</button>
                    <button class="patron" data-patron="bordes">Bordes (O)</button>
                    <button class="patron" data-patron="cruz">Cruz</button>
                    <button class="patron" data-patron="carton_lleno">Cart√≥n Lleno</button>
                </div>
                <button id="btnEmpezarPartida">¬°COMENZAR PARTIDA!</button>
            </div>
            
            <div id="lobby-vista-jugador">
                <p>Esperando que el anfitri√≥n inicie el juego...</p>
            </div>

            <hr>
            <h3>Jugadores Conectados:</h3>
            <ul id="lobbyListaJugadores"></ul>
        </section>

        <!-- PANTALLA 3: ANFITRI√ìN -->
        <section id="pantalla-juego-anfitrion" class="pantalla">
            <h2>Tablero del Anfitri√≥n</h2>
            <button id="btnSortearFicha">Sortear Siguiente Ficha</button>

            <div class="controles-automaticos">
                <label class="switch-label">
                    <input type="checkbox" id="checkAutomatico">
                    <span class="slider"></span> Sorteo Autom√°tico
                </label>
                <label class="intervalo-label">
                    Cada: <input type="number" id="inputIntervalo" min="5" max="30" value="7"> seg.
                </label>
            </div>

            <div class="displays-anfitrion">
                <div class="display" id="display-actual"><span>Sorteo Actual</span><strong id="fichaActual">--</strong></div>
                <div class="display" id="display-anterior"><span>Anterior</span><strong id="fichaAnterior">--</strong></div>
            </div>
            
            <div id="tableroControlAnfitrion" class="tablero-anfitrion"></div>
        </section>

        <!-- PANTALLA 4: JUGADOR (REDISE√ëADA) -->
        <section id="pantalla-juego-jugador" class="pantalla" style="padding:0;">
            
            <!-- CABECERA NUEVA (Avatar, Puntos, Timer, Ajustes) -->
<div class="header-jugador">
                <div class="perfil-usuario">
                    <div class="avatar-img"></div> 
                    <div class="datos-usuario">
                        <span class="nombre-usuario" id="nombreJugadorDisplay">Jugador</span>
                        <span class="puntos-usuario">Jugador</span>
                    </div>
                </div>
                
                <div class="header-derecha">
                    <div class="timer-container">
                        <span>‚è±</span> <span id="tiempoJuego">00:00</span>
                    </div>

                    <button id="btnAjustes" class="btn-ajustes">‚öôÔ∏è
                        <div id="menuAjustes" class="ajustes-menu">
                            <div class="ajuste-item">
                                Color Mesa
                                <input type="color" id="inputColorTema" value="#2ecc71">
                            </div>
                            <div class="ajuste-item">
                                Sonido
                                <div id="toggleSonidoMenu" style="cursor:pointer">üîä / üîá</div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- BOLILLAS HISTORIAL (Ahora arriba, estilo visual) -->
            <div id="historialContenedor" class="historial-bolillas">
                <span>Esperando...</span>
            </div>

            <!-- Info del Patr√≥n -->
            <div style="text-align:center; color:white; font-weight:bold; margin-bottom:5px;">
                Jugando por: <span id="jugadorPatron">---</span>
            </div>

            <!-- CARTILLA DEL JUGADOR -->
            <div id="cartillaJugador">
                <!-- Se generar√° con game-ui.js -->
            </div>

            <!-- BOT√ìN BINGO ESTILIZADO -->
            <button id="btnCantarBingo" class="btn-bingo-3d">¬°CANTAR BINGO!</button>    
            
        </section>

    </div>

    <!-- SCRIPTS -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- Cargamos primero la nueva l√≥gica de UI -->
    <script src="game-ui.js"></script>
    <!-- Luego el cliente principal -->
    <script src="client.js" defer></script>

    <!-- MODAL FIN -->
    <div id="modalFinJuego" class="modal-overlay">
        <div class="modal-contenido">
            <h2>¬°BINGO!</h2>
            <p id="modalGanadorTexto">El ganador es: ---</p>
            <button id="btnVolverAlLobby">Volver al Lobby</button>
        </div>
    </div>

</body>
</html>