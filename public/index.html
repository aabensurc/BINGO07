<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Sockets</title>
    <!-- Estilos base -->
    <link rel="stylesheet" href="style.css">
    <!-- Temas Modulares -->
    <link rel="stylesheet" href="login-theme.css">
    <link rel="stylesheet" href="lobby-theme.css">
    <link rel="stylesheet" href="game-theme.css">
    <link rel="stylesheet" href="host-theme.css">
    <link rel="stylesheet" href="modal-theme.css"> 
</head>
<body class="fondo-juego">

    <div class="app-container">

        <!-- PANTALLA 1: BIENVENIDA -->
        <section id="pantalla-bienvenida" class="pantalla activa pantalla-login-moderna">
            
            <div class="logo-container">
                <!-- LOGO SVG DIRECTO -->
                <svg class="logo-img" width="300" height="130" viewBox="0 0 300 130" xmlns="http://www.w3.org/2000/svg">
                    <filter id="sombraTexto" x="-20%" y="-20%" width="140%" height="140%">
                        <feDropShadow dx="2" dy="3" stdDeviation="2" flood-color="rgba(0,0,0,0.2)"/>
                    </filter>
                    <!-- Corona -->
                    <path d="M150 15 L165 45 L185 25 L175 65 L125 65 L115 25 L135 45 Z" 
                          fill="#f1c40f" stroke="white" stroke-width="2" 
                          style="filter: url(#sombraTexto);"/>
                    <!-- Texto BINGO -->
                    <text x="50%" y="80" text-anchor="middle" 
                          font-family="Arial, sans-serif" font-weight="900" font-size="65" 
                          fill="white" style="filter: url(#sombraTexto); letter-spacing: 2px;">
                        BINGO
                    </text>
                    <!-- Texto FAMILIAR -->
                    <text x="50%" y="115" text-anchor="middle" 
                          font-family="Arial, sans-serif" font-weight="bold" font-size="22" 
                          fill="white" style="opacity: 0.9; letter-spacing: 6px;">
                        FAMILIAR
                    </text>
                </svg>
            </div>

            <div class="form-unirse">
                <!-- Input Nombre -->
                <div class="input-group">
                    <input type="text" id="inputNombre" placeholder="Ingresa tu Nombre" maxlength="15" autocomplete="off">
                </div>
                
                <div class="separador-sutil"></div>

                <!-- Bot√≥n Crear -->
                <button id="btnCrearPartida" class="btn-inicio btn-blanco">Crear Nueva Partida</button>
                
                <div class="divider-text">O</div>
                
                <!-- Input Clave -->
                <div class="input-group">
                    <input type="text" id="inputClave" placeholder="C√≥digo de Sala" maxlength="5" autocomplete="off" style="text-transform:uppercase;">
                </div>
                
                <!-- Bot√≥n Unirse -->
                <button id="btnUnirsePartida" class="btn-inicio btn-borde">Unirse a la Partida</button>
                
                <!-- Mensaje de Error -->
                <p id="mensajeError" class="error-flotante"></p>
            </div>
        </section>

<!-- PANTALLA 2: LOBBY (REDISE√ëADO) -->
        <section id="pantalla-lobby" class="pantalla pantalla-lobby-moderna">
            <h2>Sala de Espera</h2>
            
            <!-- Caja de Clave destacada -->
            <div class="caja-clave">
                <p>C√ìDIGO DE PARTIDA</p>
                <strong id="lobbyClave" class="clave-gigante">---</strong>
            </div>
            
            <!-- Vista Anfitri√≥n -->
            <div id="lobby-vista-anfitrion" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
                <p style="margin-bottom: 15px; font-weight: bold; opacity: 0.9;">Elige el Patr√≥n de Juego:</p>
                <div id="lobbyPatrones" class="selector-patrones">
                    <button class="patron seleccionado" data-patron="linea">L√≠nea Simple</button>
                    <button class="patron" data-patron="letra_l">Letra L</button>
                    <button class="patron" data-patron="bordes">Bordes (O)</button>
                    <button class="patron" data-patron="cruz">Cruz</button>
                    <button class="patron" data-patron="carton_lleno">Cart√≥n Lleno</button>
                </div>
                <button id="btnEmpezarPartida">¬°COMENZAR JUEGO!</button>
            </div>
            
            <!-- Vista Jugador -->
            <div id="lobby-vista-jugador" style="width: 100%;">
                <p>Esperando al anfitri√≥n... <br> ¬°Prepara tus cartones!</p>
            </div>

            <!-- Lista de Jugadores (Ahora con estilo c√°psulas) -->
            <div class="lista-jugadores-container">
                <h3>JUGADORES CONECTADOS</h3>
                <ul id="lobbyListaJugadores">
                    <!-- Se llenar√° con JS: <li>üë§ Nombre</li> -->
                </ul>
            </div>
        </section>

        <!-- PANTALLA 3: ANFITRI√ìN -->
        <section id="pantalla-juego-anfitrion" class="pantalla" style="padding:0;">
            <div class="header-jugador header-anfitrion-estilo">
                <div class="perfil-usuario">
                    <div class="avatar-img anfitrion-avatar"></div> 
                    <div class="datos-usuario">
                        <span class="nombre-usuario" id="nombreAnfitrionDisplay">Anfitri√≥n</span>
                        <span class="puntos-usuario">Anfitri√≥n</span>
                    </div>
                </div>
                <div class="header-derecha">
                    <button id="btnAjustesAnfitrion" class="btn-ajustes">‚öôÔ∏è
                        <div id="menuAjustesAnfitrion" class="ajustes-menu">
                            <div class="ajuste-item">Color Mesa <input type="color" id="inputColorTemaAnfitrion" value="#2ecc71"></div>
                            <div class="ajuste-item">Sonido <div id="toggleSonidoAnfitrion" style="cursor:pointer">üîä / üîá</div></div>
                        </div>
                    </button>
                </div>
            </div>

            <div class="area-sorteo-anfitrion">
                <div class="contenedor-bolas-grandes">
                    <div class="bola-wrapper"><span class="label-bola">ANTERIOR</span><div id="fichaAnterior" class="bolilla-mediana">--</div></div>
                    <div class="bola-wrapper"><span class="label-bola">ACTUAL</span><div id="fichaActual" class="bolilla-gigante">--</div></div>
                </div>
                <button id="btnSortearFicha" class="btn-sortear">SACAR BOLILLA</button>
                <div class="controles-top-anfitrion">
                    <label class="switch-label"><input type="checkbox" id="checkAutomatico"> <span class="slider"></span></label>
                    <span style="color:white; font-weight:bold; font-size:14px;">Auto</span>
                    <input type="number" id="inputIntervalo" class="input-mini" min="3" max="30" value="7"> <span style="color:white; font-size:12px;">seg</span>
                </div>
            </div>

            <div class="contenedor-tablero-control">
                <div class="header-tablero-control">
                    <div class="col-header bg-b">B</div><div class="col-header bg-i">I</div><div class="col-header bg-n">N</div><div class="col-header bg-g">G</div><div class="col-header bg-o">O</div>
                </div>
                <div id="grid75" class="grid-75"></div>
            </div>
        </section>

        <!-- PANTALLA 4: JUGADOR -->
        <section id="pantalla-juego-jugador" class="pantalla" style="padding:0;">
            <div class="header-jugador">
                <div class="perfil-usuario">
                    <div class="avatar-img"></div> 
                    <div class="datos-usuario">
                        <span class="nombre-usuario" id="nombreJugadorDisplay">Jugador</span>
                        <span class="puntos-usuario">Jugador</span>
                    </div>
                </div>
                <div class="header-derecha">
                    <div class="timer-container"><span>‚è±</span> <span id="tiempoJuego">00:00</span></div>
                    <button id="btnAjustes" class="btn-ajustes">‚öôÔ∏è
                        <div id="menuAjustes" class="ajustes-menu">
                            <div class="ajuste-item">Color Mesa <input type="color" id="inputColorTema" value="#2ecc71"></div>
                            <div class="ajuste-item">Sonido <div id="toggleSonidoMenu" style="cursor:pointer">üîä / üîá</div></div>
                        </div>
                    </button>
                </div>
            </div>
            <div id="historialContenedor" class="historial-bolillas"><span>Esperando...</span></div>
            <div style="text-align:center; color:white; font-weight:bold; margin-bottom:5px;">
                Jugando por: <span id="jugadorPatron">---</span>
            </div>
            <div id="cartillaJugador"></div>
            <button id="btnCantarBingo" class="btn-bingo-3d">¬°CANTAR BINGO!</button>    
        </section>

    </div>

    <!-- SCRIPTS -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="game-ui.js"></script>
    <script src="host-ui.js"></script>
    <script src="client.js" defer></script>

<!-- MODAL FIN (REDISE√ëADO CON ESTILO CELEBRACI√ìN) -->
<div id="modalFinJuego" class="modal-overlay">
    <div class="modal-card">
        <div class="icono-trofeo">üèÜ</div>
        <h2 class="modal-titulo">¬°BINGO!</h2>
        <p class="modal-subtitulo">El ganador es:</p>
        
        <div class="ganador-wrapper">
            <p id="modalGanadorTexto" class="modal-ganador-nombre">---</p>
            <button id="btnVerCartonGanador" class="btn-ver-carton" title="Ver Cartilla Ganadora">
                üëÅÔ∏è
            </button>
        </div>

        <div id="contenedorCartillaGanadora" class="cartilla-ganadora-container oculto">
            </div>

        <button id="btnVolverAlLobby" class="btn-modal">Volver al Lobby</button>
    </div>
</div>

</body>
</html>