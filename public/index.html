<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Sockets</title>
    <!-- Estilos base -->
    <link rel="stylesheet" href="style.css">
    <!-- Tema Principal (Variables y estilos comunes) -->
    <link rel="stylesheet" href="game-theme.css">
    <!-- Tema Espec√≠fico del Anfitri√≥n (NUEVO) -->
    <link rel="stylesheet" href="host-theme.css">
</head>
<body class="fondo-juego">

    <div class="app-container">

        <!-- PANTALLA 1: BIENVENIDA -->
        <section id="pantalla-bienvenida" class="pantalla activa">
            <h1>Bingo Familiar</h1>
            <div class="form-unirse">
                <input type="text" id="inputNombre" placeholder="Ingresa tu Nombre" maxlength="15">
                <hr>
                <button id="btnCrearPartida">Crear Nueva Partida</button>
                <hr>
                <input type="text" id="inputClave" placeholder="Ingresa la Clave" maxlength="5">
                <button id="btnUnirsePartida">Unirse a la Partida</button>
                <p id="mensajeError"></p>
            </div>
        </section>

        <!-- PANTALLA 2: LOBBY -->
        <section id="pantalla-lobby" class="pantalla">
            <h2>Sala de Espera</h2>
            <p>Clave de la Partida: <strong id="lobbyClave">---</strong></p>
            
            <div id="lobby-vista-anfitrion">
                <h3>Selecciona el Patr√≥n de Juego:</h3>
                <div id="lobbyPatrones" class="selector-patrones">
                    <button class="patron seleccionado" data-patron="linea">L√≠nea Simple</button>
                    <button class="patron" data-patron="letra_l">Letra L</button>
                    <button class="patron" data-patron="bordes">Bordes (O)</button>
                    <button class="patron" data-patron="cruz">Cruz</button>
                    <button class="patron" data-patron="carton_lleno">Cart√≥n Lleno</button>
                </div>
                <button id="btnEmpezarPartida">¬°COMENZAR PARTIDA!</button>
            </div>
            
            <div id="lobby-vista-jugador">
                <p>Esperando que el anfitri√≥n inicie el juego...</p>
            </div>

            <hr>
            <h3>Jugadores Conectados:</h3>
            <ul id="lobbyListaJugadores"></ul>
        </section>

        <!-- PANTALLA 3: ANFITRI√ìN (REDISE√ëADA) -->
        <section id="pantalla-juego-anfitrion" class="pantalla" style="padding:0;">
            
            <!-- 1. CABECERA ANFITRI√ìN (REORGANIZADA) -->
            <div class="header-jugador header-anfitrion-estilo">
                
                <!-- IZQUIERDA: Perfil (Movido aqu√≠ y sin el logo de texto) -->
                <div class="perfil-usuario">
                    <div class="avatar-img anfitrion-avatar"></div> 
                    <div class="datos-usuario">
                        <span class="nombre-usuario" id="nombreAnfitrionDisplay">Anfitri√≥n</span>
                        <span class="puntos-usuario">Anfitri√≥n</span>
                    </div>
                </div>

                <!-- DERECHA: Solo Ajustes -->
                <div class="header-derecha">
                    <button id="btnAjustesAnfitrion" class="btn-ajustes">‚öôÔ∏è
                        <div id="menuAjustesAnfitrion" class="ajustes-menu">
                            <div class="ajuste-item">
                                Color Mesa
                                <input type="color" id="inputColorTemaAnfitrion" value="#2ecc71">
                            </div>
                            <div class="ajuste-item">
                                Sonido
                                <div id="toggleSonidoAnfitrion" style="cursor:pointer">üîä / üîá</div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- 2. √ÅREA DE SORTEO -->
            <div class="area-sorteo-anfitrion">
                
                <!-- Bolillas Visuales -->
                <div class="contenedor-bolas-grandes">
                    <div class="bola-wrapper">
                        <span class="label-bola">ANTERIOR</span>
                        <div id="fichaAnterior" class="bolilla-mediana">--</div>
                    </div>
                    
                    <div class="bola-wrapper">
                        <span class="label-bola">ACTUAL</span>
                        <div id="fichaActual" class="bolilla-gigante">--</div>
                    </div>
                </div>

                <!-- Bot√≥n Principal -->
                <button id="btnSortearFicha" class="btn-sortear">SACAR BOLILLA</button>

                <!-- Controles Autom√°ticos -->
                <div class="controles-top-anfitrion">
                    <label class="switch-label">
                        <input type="checkbox" id="checkAutomatico">
                        <span class="slider"></span>
                    </label>
                    <span style="color:white; font-weight:bold; font-size:14px;">Auto</span>
                    <input type="number" id="inputIntervalo" class="input-mini" min="3" max="30" value="7"> 
                    <span style="color:white; font-size:12px;">seg</span>
                </div>

            </div>

            <!-- 3. TABLERO DE CONTROL 1-75 -->
            <div class="contenedor-tablero-control">
                <!-- Headers B I N G O -->
                <div class="header-tablero-control">
                    <div class="col-header bg-b">B</div>
                    <div class="col-header bg-i">I</div>
                    <div class="col-header bg-n">N</div>
                    <div class="col-header bg-g">G</div>
                    <div class="col-header bg-o">O</div>
                </div>
                
                <!-- Grid de n√∫meros -->
                <div id="grid75" class="grid-75">
                    <!-- Se genera con JS -->
                </div>
            </div>

        </section>


        <!-- PANTALLA 4: JUGADOR -->
        <section id="pantalla-juego-jugador" class="pantalla" style="padding:0;">
            
            <div class="header-jugador">
                <div class="perfil-usuario">
                    <div class="avatar-img"></div> 
                    <div class="datos-usuario">
                        <span class="nombre-usuario" id="nombreJugadorDisplay">Jugador</span>
                        <span class="puntos-usuario">Jugador</span>
                    </div>
                </div>
                
                <div class="header-derecha">
                    <div class="timer-container">
                        <span>‚è±</span> <span id="tiempoJuego">00:00</span>
                    </div>

                    <button id="btnAjustes" class="btn-ajustes">‚öôÔ∏è
                        <div id="menuAjustes" class="ajustes-menu">
                            <div class="ajuste-item">
                                Color Mesa
                                <input type="color" id="inputColorTema" value="#2ecc71">
                            </div>
                            <div class="ajuste-item">
                                Sonido
                                <div id="toggleSonidoMenu" style="cursor:pointer">üîä / üîá</div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <div id="historialContenedor" class="historial-bolillas">
                <span>Esperando...</span>
            </div>

            <div style="text-align:center; color:white; font-weight:bold; margin-bottom:5px;">
                Jugando por: <span id="jugadorPatron">---</span>
            </div>

            <div id="cartillaJugador"></div>

            <button id="btnCantarBingo" class="btn-bingo-3d">¬°CANTAR BINGO!</button>    
            
        </section>

    </div>

    <!-- SCRIPTS -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="game-ui.js"></script> <!-- UI Jugador -->
    <script src="host-ui.js"></script> <!-- UI Anfitri√≥n (NUEVO) -->
    <script src="client.js" defer></script>

    <!-- MODAL FIN -->
    <div id="modalFinJuego" class="modal-overlay">
        <div class="modal-contenido">
            <h2>¬°BINGO!</h2>
            <p id="modalGanadorTexto">El ganador es: ---</p>
            <button id="btnVolverAlLobby">Volver al Lobby</button>
        </div>
    </div>

</body>
</html>